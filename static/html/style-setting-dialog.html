<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="/bower_components/paper-slider/paper-slider.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">
<link rel="import" href="/html/selecting-color-dialog.html">
<polymer-element name="style-setting-dialog">
        <template>
                <style>
                </style>
                <selecting-color-dialog id="color_dialog">
                </selecting-color-dialog>
		<paper-dialog id="main_dialog" heading="Style Setting">
                        <br>
                        <section>
				<label>Opacity</label>
                                <br>
                                <paper-slider class="slider" id="opacity_slider" pin min="0" max="100"></paper-slider>
                        </section>
                        <section>
				<label>Width</label>
                                <br>
                                <paper-slider class="slider" id="width_slider" pin snap min="1" max="50"></paper-slider>
                        </section>
                        <br/><br/>
                        <paper-button id="color_button" on-click="{{select_color}}">Select Color</paper-button>
                        <paper-button id="ok_button" on-click="{{save}}">OK</paper-button>
                </paper-dialog>
        </template>
        <script>
                Polymer({
                        setStyleObject:function(style_object){
                                this.__style_object=style_object;
                        },
                        show:function(){
                                if(this.__style_object){
                                        this.setColor(this.__style_object.color);
                                        this.$.opacity_slider.immediateValue=this.__style_object.opacity*100;
                                        this.$.width_slider.immediateValue=this.__style_object.width;
                                }
                                this.$.main_dialog.toggle(true);
                        },
                        hide:function(){
                                this.$.main_dialog.toggle(false);
                        },
                        setColor:function(color){
                                this.__color=color;
                                this.$.color_button.style.backgroundColor=color;
                                this.$.color_button.style.color="#eeeeee";
                        },
                        select_color:function(){
                                var self=this;
                                self.$.color_dialog.select(function(color){
                                        self.setColor(color);
                                });
                        },
                        save:function(){
                                var self=this;
                                if(this.__style_object){
                                        this.__style_object.color=this.__color;
                                        this.__style_object.width=this.$.width_slider.immediateValue;
                                        this.__style_object.opacity=this.$.opacity_slider.immediateValue/100;
                                }
                                this.hide();
                        },
                });
        </script>
</polymer-element>
